!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).StaticEdit=e()}}(function(){return function e(t,n,o){function r(u,a){if(!n[u]){if(!t[u]){var l="function"==typeof require&&require;if(!a&&l)return l(u,!0);if(i)return i(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var s=n[u]={exports:{}};t[u][0].call(s.exports,function(e){var n=t[u][1][e];return r(n||e)},s,s.exports,e,t,n,o)}return n[u].exports}for(var i="function"==typeof require&&require,u=0;u<o.length;u++)r(o[u]);return r}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("./elements/block"),r=e("./elements/line"),i=e("./elements/image"),u=e("./elements/bg-editable"),a=function(){function e(e){this.options=e,this.selector=".editable",this.bgSelector=".bg-editable",this.handleOptions(),this.elems=[];var t=Array.from(document.querySelectorAll(this.selector));t=t.concat(Array.from(document.querySelectorAll(this.bgSelector)));for(var n=0;n<t.length;++n){var a=void 0,l=t[n];(a=l.matches(this.bgSelector)?new u.BgEditable(l,this):"P"===t[n].tagName?new o.Block(l,this):"IMG"===t[n].tagName?new i.Image(l,this):new r.Line(l,this)).bindEvents(),this.elems.push(a)}}return e.prototype.handleOptions=function(){!0===this.options.saveButton&&this.createSaveButton(),void 0!==this.options.selector&&(this.selector=this.options.selector)},e.prototype.createSaveButton=function(){var e=this,t=document.createElement("button");t.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),window.dispatchEvent(new CustomEvent("static_edit.saving",{detail:{changed:e.elems.filter(function(e){return e.hasChanged})}}))}),t.textContent="Save",t.style.position="absolute",t.style.top="20px",t.style.left="20px",document.body.appendChild(t)},e.prototype.editionStarted=function(e,t){return!this.editing&&(this.editing=!0,window.dispatchEvent(new CustomEvent("static_edit.editing",{detail:{elem:e,oldValue:t}})),!0)},e.prototype.editionEnded=function(e,t,n){this.editing=!1,window.dispatchEvent(new CustomEvent("static_edit.edited",{detail:{elem:e,oldValue:t,newValue:n}}))},e}();n.Editor=a},{"./elements/bg-editable":2,"./elements/block":3,"./elements/image":6,"./elements/line":7}],2:[function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.elem.style.backgroundImage},enumerable:!0,configurable:!0}),t.prototype.changeValue=function(e,t){this.elem.dataset.fileName=t,this.elem.style.backgroundImage="url("+e+")"},t}(e("./file-upload").FileUpload);n.BgEditable=r},{"./file-upload":5}],3:[function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.createField=function(){return document.createElement("textarea")},t}(e("./text").Text);n.Block=r},{"./text":8}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){this.elem=e,this.editor=t}return Object.defineProperty(e.prototype,"element",{get:function(){return this.elem},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasChanged",{get:function(){return this.changed},enumerable:!0,configurable:!0}),e}();n.Editable=o},{}],5:[function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.createField=function(){var e=document.createElement("input");return e.type="file",e.style.display="none",e},t.prototype.bindEvents=function(){var e=this;this.elem.addEventListener("click",function(t){t.stopPropagation(),t.preventDefault();var n=e.createField();n.addEventListener("change",function(){var t=n.files[0];if(t.type.match(/image.*/)){var o=new FileReader;o.addEventListener("loadend",function(o){var r=o.target.result,i=e.value;e.changeValue(r,t.name),e.changed=!0,e.elem.parentNode.removeChild(n),setTimeout(function(){return e.editor.editionEnded(e.elem,i,r)},100)}),o.readAsDataURL(t)}}),e.elem.parentNode.appendChild(n),n.click()})},t}(e("./editable").Editable);n.FileUpload=r},{"./editable":4}],6:[function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.elem.src},enumerable:!0,configurable:!0}),t.prototype.changeValue=function(e,t){this.elem.src=e,this.elem.dataset.fileName=t},t}(e("./file-upload").FileUpload);n.Image=r},{"./file-upload":5}],7:[function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.createField=function(){return document.createElement("input")},t}(e("./text").Text);n.Line=r},{"./text":8}],8:[function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.bindEvents=function(){var e=this;this.elem.addEventListener("click",function(t){if(t.stopPropagation(),t.preventDefault(),t.cancelBubble=!0,!e.editor.editionStarted(e.elem,e.elem.innerText))return!1;var n=e.createField();n.value=e.elem.innerText,n.addEventListener("blur",function(){var t=e.elem.innerText,o=n.value;e.elem.innerText=o,e.changed=!0,n.parentNode.replaceChild(e.elem,n),setTimeout(function(){return e.editor.editionEnded(e.elem,t,o)},100)}),n.addEventListener("click",function(e){e.stopPropagation(),e.preventDefault()});var o=function(){n.style.height="auto",n.style.height=n.scrollHeight+"px"},r=function(){return window.setTimeout(o,0)};n.addEventListener("change",o),n.addEventListener("cut",r),n.addEventListener("paste",r),n.addEventListener("drop",r),n.addEventListener("keydown",r),n.style.width="auto",n.style.height=e.elem.offsetHeight+"px",n.style.overflowY="hidden",n.style.fontSize=window.getComputedStyle(e.elem).fontSize,e.elem.parentNode.replaceChild(n,e.elem),n.focus(),o()},!0)},Object.defineProperty(t.prototype,"value",{get:function(){return this.elem.textContent},enumerable:!0,configurable:!0}),t}(e("./editable").Editable);n.Text=r},{"./editable":4}]},{},[1])(1)});